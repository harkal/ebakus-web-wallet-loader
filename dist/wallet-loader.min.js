/*!
 * The wallet loader library creates an iframe and loads the web wallet library in there. It can accept custom configurations for the wallet (i.e. load custom tokens) and act as an interface between the dApp and the web wallet iframe. This way a user can use his wallet to interface with any ebakus dApp she wants without having to create new keys and manage multiple accounts. v1.0.0
 *
 * @author Chris Ziogas <chris@ebakus.com>
 * @website https://www.ebakus.com/
 *
 * @copyright Ebakus 2019
 * @license MIT
 */
window.ebakusWallet = (function(t) {
  var n = {}
  function e(r) {
    if (n[r]) return n[r].exports
    var o = (n[r] = { i: r, l: !1, exports: {} })
    return t[r].call(o.exports, o, o.exports, e), (o.l = !0), o.exports
  }
  return (
    (e.m = t),
    (e.c = n),
    (e.d = function(t, n, r) {
      e.o(t, n) || Object.defineProperty(t, n, { enumerable: !0, get: r })
    }),
    (e.r = function(t) {
      'undefined' != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: 'Module' }),
        Object.defineProperty(t, '__esModule', { value: !0 })
    }),
    (e.t = function(t, n) {
      if ((1 & n && (t = e(t)), 8 & n)) return t
      if (4 & n && 'object' == typeof t && t && t.__esModule) return t
      var r = Object.create(null)
      if (
        (e.r(r),
        Object.defineProperty(r, 'default', { enumerable: !0, value: t }),
        2 & n && 'string' != typeof t)
      )
        for (var o in t)
          e.d(
            r,
            o,
            function(n) {
              return t[n]
            }.bind(null, o)
          )
      return r
    }),
    (e.n = function(t) {
      var n =
        t && t.__esModule
          ? function() {
              return t.default
            }
          : function() {
              return t
            }
      return e.d(n, 'a', n), n
    }),
    (e.o = function(t, n) {
      return Object.prototype.hasOwnProperty.call(t, n)
    }),
    (e.p = ''),
    e((e.s = 37))
  )
})([
  function(t, n) {
    var e = (t.exports =
      'undefined' != typeof window && window.Math == Math
        ? window
        : 'undefined' != typeof self && self.Math == Math
        ? self
        : Function('return this')())
    'number' == typeof __g && (__g = e)
  },
  function(t, n, e) {
    t.exports = !e(3)(function() {
      return (
        7 !=
        Object.defineProperty({}, 'a', {
          get: function() {
            return 7
          },
        }).a
      )
    })
  },
  function(t, n, e) {
    var r = e(4)
    t.exports = function(t) {
      if (!r(t)) throw TypeError(t + ' is not an object!')
      return t
    }
  },
  function(t, n) {
    t.exports = function(t) {
      try {
        return !!t()
      } catch (t) {
        return !0
      }
    }
  },
  function(t, n) {
    t.exports = function(t) {
      return 'object' == typeof t ? null !== t : 'function' == typeof t
    }
  },
  function(t, n) {
    t.exports = function(t) {
      if (null == t) throw TypeError("Can't call method on  " + t)
      return t
    }
  },
  function(t, n) {
    var e = Math.ceil,
      r = Math.floor
    t.exports = function(t) {
      return isNaN((t = +t)) ? 0 : (t > 0 ? r : e)(t)
    }
  },
  function(t, n) {
    var e = (t.exports = { version: '2.6.2' })
    'number' == typeof __e && (__e = e)
  },
  function(t, n, e) {
    'use strict'
    var r = e(2)
    t.exports = function() {
      var t = r(this),
        n = ''
      return (
        t.global && (n += 'g'),
        t.ignoreCase && (n += 'i'),
        t.multiline && (n += 'm'),
        t.unicode && (n += 'u'),
        t.sticky && (n += 'y'),
        n
      )
    }
  },
  function(t, n, e) {
    var r = e(14),
      o = e(31)
    t.exports = e(1)
      ? function(t, n, e) {
          return r.f(t, n, o(1, e))
        }
      : function(t, n, e) {
          return (t[n] = e), t
        }
  },
  function(t, n, e) {
    var r = e(0),
      o = e(9),
      i = e(32),
      c = e(12)('src'),
      u = Function.toString,
      a = ('' + u).split('toString')
    ;(e(7).inspectSource = function(t) {
      return u.call(t)
    }),
      (t.exports = function(t, n, e, u) {
        var s = 'function' == typeof e
        s && (i(e, 'name') || o(e, 'name', n)),
          t[n] !== e &&
            (s && (i(e, c) || o(e, c, t[n] ? '' + t[n] : a.join(String(n)))),
            t === r
              ? (t[n] = e)
              : u
              ? t[n]
                ? (t[n] = e)
                : o(t, n, e)
              : (delete t[n], o(t, n, e)))
      })(Function.prototype, 'toString', function() {
        return ('function' == typeof this && this[c]) || u.call(this)
      })
  },
  function(t, n, e) {
    var r = e(23)('wks'),
      o = e(12),
      i = e(0).Symbol,
      c = 'function' == typeof i
    ;(t.exports = function(t) {
      return r[t] || (r[t] = (c && i[t]) || (c ? i : o)('Symbol.' + t))
    }).store = r
  },
  function(t, n) {
    var e = 0,
      r = Math.random()
    t.exports = function(t) {
      return 'Symbol('.concat(
        void 0 === t ? '' : t,
        ')_',
        (++e + r).toString(36)
      )
    }
  },
  function(t, n, e) {
    'use strict'
    var r,
      o,
      i = e(8),
      c = RegExp.prototype.exec,
      u = String.prototype.replace,
      a = c,
      s = ((r = /a/),
      (o = /b*/g),
      c.call(r, 'a'),
      c.call(o, 'a'),
      0 !== r.lastIndex || 0 !== o.lastIndex),
      l = void 0 !== /()??/.exec('')[1]
    ;(s || l) &&
      (a = function(t) {
        var n,
          e,
          r,
          o,
          a = this
        return (
          l && (e = new RegExp('^' + a.source + '$(?!\\s)', i.call(a))),
          s && (n = a.lastIndex),
          (r = c.call(a, t)),
          s && r && (a.lastIndex = a.global ? r.index + r[0].length : n),
          l &&
            r &&
            r.length > 1 &&
            u.call(r[0], e, function() {
              for (o = 1; o < arguments.length - 2; o++)
                void 0 === arguments[o] && (r[o] = void 0)
            }),
          r
        )
      }),
      (t.exports = a)
  },
  function(t, n, e) {
    var r = e(2),
      o = e(28),
      i = e(30),
      c = Object.defineProperty
    n.f = e(1)
      ? Object.defineProperty
      : function(t, n, e) {
          if ((r(t), (n = i(n, !0)), r(e), o))
            try {
              return c(t, n, e)
            } catch (t) {}
          if ('get' in e || 'set' in e)
            throw TypeError('Accessors not supported!')
          return 'value' in e && (t[n] = e.value), t
        }
  },
  function(t, n, e) {
    'use strict'
    var r = e(2),
      o = e(16),
      i = e(17),
      c = e(6),
      u = e(18),
      a = e(20),
      s = Math.max,
      l = Math.min,
      f = Math.floor,
      p = /\$([$&`']|\d\d?|<[^>]*>)/g,
      d = /\$([$&`']|\d\d?)/g
    e(25)('replace', 2, function(t, n, e, v) {
      return [
        function(r, o) {
          var i = t(this),
            c = null == r ? void 0 : r[n]
          return void 0 !== c ? c.call(r, i, o) : e.call(String(i), r, o)
        },
        function(t, n) {
          var o = v(e, t, this, n)
          if (o.done) return o.value
          var f = r(t),
            p = String(this),
            d = 'function' == typeof n
          d || (n = String(n))
          var h = f.global
          if (h) {
            var y = f.unicode
            f.lastIndex = 0
          }
          for (var x = []; ; ) {
            var m = a(f, p)
            if (null === m) break
            if ((x.push(m), !h)) break
            '' === String(m[0]) && (f.lastIndex = u(p, i(f.lastIndex), y))
          }
          for (var b, w = '', S = 0, E = 0; E < x.length; E++) {
            m = x[E]
            for (
              var _ = String(m[0]),
                O = s(l(c(m.index), p.length), 0),
                j = [],
                M = 1;
              M < m.length;
              M++
            )
              j.push(void 0 === (b = m[M]) ? b : String(b))
            var k = m.groups
            if (d) {
              var P = [_].concat(j, O, p)
              void 0 !== k && P.push(k)
              var T = String(n.apply(void 0, P))
            } else T = g(_, p, O, j, k, n)
            O >= S && ((w += p.slice(S, O) + T), (S = O + _.length))
          }
          return w + p.slice(S)
        },
      ]
      function g(t, n, r, i, c, u) {
        var a = r + t.length,
          s = i.length,
          l = d
        return (
          void 0 !== c && ((c = o(c)), (l = p)),
          e.call(u, l, function(e, o) {
            var u
            switch (o.charAt(0)) {
              case '$':
                return '$'
              case '&':
                return t
              case '`':
                return n.slice(0, r)
              case "'":
                return n.slice(a)
              case '<':
                u = c[o.slice(1, -1)]
                break
              default:
                var l = +o
                if (0 === l) return e
                if (l > s) {
                  var p = f(l / 10)
                  return 0 === p
                    ? e
                    : p <= s
                    ? void 0 === i[p - 1]
                      ? o.charAt(1)
                      : i[p - 1] + o.charAt(1)
                    : e
                }
                u = i[l - 1]
            }
            return void 0 === u ? '' : u
          })
        )
      }
    })
  },
  function(t, n, e) {
    var r = e(5)
    t.exports = function(t) {
      return Object(r(t))
    }
  },
  function(t, n, e) {
    var r = e(6),
      o = Math.min
    t.exports = function(t) {
      return t > 0 ? o(r(t), 9007199254740991) : 0
    }
  },
  function(t, n, e) {
    'use strict'
    var r = e(19)(!0)
    t.exports = function(t, n, e) {
      return n + (e ? r(t, n).length : 1)
    }
  },
  function(t, n, e) {
    var r = e(6),
      o = e(5)
    t.exports = function(t) {
      return function(n, e) {
        var i,
          c,
          u = String(o(n)),
          a = r(e),
          s = u.length
        return a < 0 || a >= s
          ? t
            ? ''
            : void 0
          : (i = u.charCodeAt(a)) < 55296 ||
            i > 56319 ||
            a + 1 === s ||
            (c = u.charCodeAt(a + 1)) < 56320 ||
            c > 57343
          ? t
            ? u.charAt(a)
            : i
          : t
          ? u.slice(a, a + 2)
          : c - 56320 + ((i - 55296) << 10) + 65536
      }
    }
  },
  function(t, n, e) {
    'use strict'
    var r = e(21),
      o = RegExp.prototype.exec
    t.exports = function(t, n) {
      var e = t.exec
      if ('function' == typeof e) {
        var i = e.call(t, n)
        if ('object' != typeof i)
          throw new TypeError(
            'RegExp exec method returned something other than an Object or null'
          )
        return i
      }
      if ('RegExp' !== r(t))
        throw new TypeError('RegExp#exec called on incompatible receiver')
      return o.call(t, n)
    }
  },
  function(t, n, e) {
    var r = e(22),
      o = e(11)('toStringTag'),
      i =
        'Arguments' ==
        r(
          (function() {
            return arguments
          })()
        )
    t.exports = function(t) {
      var n, e, c
      return void 0 === t
        ? 'Undefined'
        : null === t
        ? 'Null'
        : 'string' ==
          typeof (e = (function(t, n) {
            try {
              return t[n]
            } catch (t) {}
          })((n = Object(t)), o))
        ? e
        : i
        ? r(n)
        : 'Object' == (c = r(n)) && 'function' == typeof n.callee
        ? 'Arguments'
        : c
    }
  },
  function(t, n) {
    var e = {}.toString
    t.exports = function(t) {
      return e.call(t).slice(8, -1)
    }
  },
  function(t, n, e) {
    var r = e(7),
      o = e(0),
      i = o['__core-js_shared__'] || (o['__core-js_shared__'] = {})
    ;(t.exports = function(t, n) {
      return i[t] || (i[t] = void 0 !== n ? n : {})
    })('versions', []).push({
      version: r.version,
      mode: e(24) ? 'pure' : 'global',
      copyright: '© 2019 Denis Pushkarev (zloirock.ru)',
    })
  },
  function(t, n) {
    t.exports = !1
  },
  function(t, n, e) {
    'use strict'
    e(26)
    var r = e(10),
      o = e(9),
      i = e(3),
      c = e(5),
      u = e(11),
      a = e(13),
      s = u('species'),
      l = !i(function() {
        var t = /./
        return (
          (t.exec = function() {
            var t = []
            return (t.groups = { a: '7' }), t
          }),
          '7' !== ''.replace(t, '$<a>')
        )
      }),
      f = (function() {
        var t = /(?:)/,
          n = t.exec
        t.exec = function() {
          return n.apply(this, arguments)
        }
        var e = 'ab'.split(t)
        return 2 === e.length && 'a' === e[0] && 'b' === e[1]
      })()
    t.exports = function(t, n, e) {
      var p = u(t),
        d = !i(function() {
          var n = {}
          return (
            (n[p] = function() {
              return 7
            }),
            7 != ''[t](n)
          )
        }),
        v = d
          ? !i(function() {
              var n = !1,
                e = /a/
              return (
                (e.exec = function() {
                  return (n = !0), null
                }),
                'split' === t &&
                  ((e.constructor = {}),
                  (e.constructor[s] = function() {
                    return e
                  })),
                e[p](''),
                !n
              )
            })
          : void 0
      if (!d || !v || ('replace' === t && !l) || ('split' === t && !f)) {
        var g = /./[p],
          h = e(c, p, ''[t], function(t, n, e, r, o) {
            return n.exec === a
              ? d && !o
                ? { done: !0, value: g.call(n, e, r) }
                : { done: !0, value: t.call(e, n, r) }
              : { done: !1 }
          }),
          y = h[0],
          x = h[1]
        r(String.prototype, t, y),
          o(
            RegExp.prototype,
            p,
            2 == n
              ? function(t, n) {
                  return x.call(t, this, n)
                }
              : function(t) {
                  return x.call(t, this)
                }
          )
      }
    }
  },
  function(t, n, e) {
    'use strict'
    var r = e(13)
    e(27)({ target: 'RegExp', proto: !0, forced: r !== /./.exec }, { exec: r })
  },
  function(t, n, e) {
    var r = e(0),
      o = e(7),
      i = e(9),
      c = e(10),
      u = e(33),
      a = function(t, n, e) {
        var s,
          l,
          f,
          p,
          d = t & a.F,
          v = t & a.G,
          g = t & a.S,
          h = t & a.P,
          y = t & a.B,
          x = v ? r : g ? r[n] || (r[n] = {}) : (r[n] || {}).prototype,
          m = v ? o : o[n] || (o[n] = {}),
          b = m.prototype || (m.prototype = {})
        for (s in (v && (e = n), e))
          (f = ((l = !d && x && void 0 !== x[s]) ? x : e)[s]),
            (p =
              y && l
                ? u(f, r)
                : h && 'function' == typeof f
                ? u(Function.call, f)
                : f),
            x && c(x, s, f, t & a.U),
            m[s] != f && i(m, s, p),
            h && b[s] != f && (b[s] = f)
      }
    ;(r.core = o),
      (a.F = 1),
      (a.G = 2),
      (a.S = 4),
      (a.P = 8),
      (a.B = 16),
      (a.W = 32),
      (a.U = 64),
      (a.R = 128),
      (t.exports = a)
  },
  function(t, n, e) {
    t.exports =
      !e(1) &&
      !e(3)(function() {
        return (
          7 !=
          Object.defineProperty(e(29)('div'), 'a', {
            get: function() {
              return 7
            },
          }).a
        )
      })
  },
  function(t, n, e) {
    var r = e(4),
      o = e(0).document,
      i = r(o) && r(o.createElement)
    t.exports = function(t) {
      return i ? o.createElement(t) : {}
    }
  },
  function(t, n, e) {
    var r = e(4)
    t.exports = function(t, n) {
      if (!r(t)) return t
      var e, o
      if (n && 'function' == typeof (e = t.toString) && !r((o = e.call(t))))
        return o
      if ('function' == typeof (e = t.valueOf) && !r((o = e.call(t)))) return o
      if (!n && 'function' == typeof (e = t.toString) && !r((o = e.call(t))))
        return o
      throw TypeError("Can't convert object to primitive value")
    }
  },
  function(t, n) {
    t.exports = function(t, n) {
      return {
        enumerable: !(1 & t),
        configurable: !(2 & t),
        writable: !(4 & t),
        value: n,
      }
    }
  },
  function(t, n) {
    var e = {}.hasOwnProperty
    t.exports = function(t, n) {
      return e.call(t, n)
    }
  },
  function(t, n, e) {
    var r = e(34)
    t.exports = function(t, n, e) {
      if ((r(t), void 0 === n)) return t
      switch (e) {
        case 1:
          return function(e) {
            return t.call(n, e)
          }
        case 2:
          return function(e, r) {
            return t.call(n, e, r)
          }
        case 3:
          return function(e, r, o) {
            return t.call(n, e, r, o)
          }
      }
      return function() {
        return t.apply(n, arguments)
      }
    }
  },
  function(t, n) {
    t.exports = function(t) {
      if ('function' != typeof t) throw TypeError(t + ' is not a function!')
      return t
    }
  },
  function(t, n, e) {
    'use strict'
    e(36)
    var r = e(2),
      o = e(8),
      i = e(1),
      c = /./.toString,
      u = function(t) {
        e(10)(RegExp.prototype, 'toString', t, !0)
      }
    e(3)(function() {
      return '/a/b' != c.call({ source: 'a', flags: 'b' })
    })
      ? u(function() {
          var t = r(this)
          return '/'.concat(
            t.source,
            '/',
            'flags' in t
              ? t.flags
              : !i && t instanceof RegExp
              ? o.call(t)
              : void 0
          )
        })
      : 'toString' != c.name &&
        u(function() {
          return c.call(this)
        })
  },
  function(t, n, e) {
    e(1) &&
      'g' != /./g.flags &&
      e(14).f(RegExp.prototype, 'flags', { configurable: !0, get: e(8) })
  },
  function(t, n, e) {
    'use strict'
    let r, o, i
    e.r(n), e(15), e(35)
    const c = {},
      u = () => {
        const t = () =>
          Math.random()
            .toString(36)
            .slice(2)
        let n = t()
        for (; n in c; ) n = t()
        return n
      },
      a = (t, n) => {
        const e = { id: u(), cmd: t, req: n }
        return new Promise((n, o) => {
          c[e.id] = e => {
            delete c[e.id],
              e.cmd !== t &&
                o(new Error('Wallet response is not for this request'))
            const r = e.res,
              i = e.err
            r ? n(r) : o(i || new Error('Please try again'))
          }
          try {
            i.postMessage(JSON.stringify(e), r)
          } catch (t) {
            delete c[response.id]
          }
        })
      },
      s = (t, n) => {
        const e = { cmd: t, passive: !0, req: n }
        try {
          i.postMessage(JSON.stringify(e), r)
        } catch (t) {}
      },
      l = t => {
        if (t.origin === window.location.origin) return
        if (t.origin !== r || t.source !== i) return
        const n = JSON.parse(t.data),
          e = n.id,
          u = n.cmd,
          a = n.req
        e && c[e]
          ? c[e](n)
          : 'active' === u
          ? (o.className += ' active')
          : 'inactive' === u
          ? (o.className = '')
          : 'withOverlay' === u
          ? (o.className += ' overlay')
          : 'withoutOverlay' === u
          ? (o.className = o.className.replace(/\boverlay\b/, ''))
          : 'openInNewTab' === u &&
            'string' == typeof a &&
            Object.assign(document.createElement('a'), {
              target: '_blank',
              href: a,
            }).click()
      }
    e.d(n, 'init', function() {
      return f
    }),
      e.d(n, 'getDefaultAddress', function() {
        return p
      }),
      e.d(n, 'getBalance', function() {
        return d
      }),
      e.d(n, 'sendTransaction', function() {
        return v
      }),
      (() => {
        const t = document.createElement('style')
        ;(t.className = 'ebakus-styles'),
          (t.innerHTML =
            '\n#ebakus-wallet-frame {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 80px;\n  height: 80px;\n  z-index: 2147483647;\n}\n\n#ebakus-wallet-frame.active {\n  right: 0;\n  width: 330px;\n  height: 100%;\n}\n\n#ebakus-wallet-frame.active.overlay {\n  left: 0;\n  right: auto;\n  width: 100%;\n}\n'),
          document.getElementsByTagName('head')[0].appendChild(t),
          (o = (() => {
            const t = document.createElement('iframe')
            ;(t.id = 'ebakus-wallet-frame'),
              t.setAttribute('frameBorder', '0'),
              t.setAttribute('sandbox', 'allow-scripts allow-same-origin'),
              (t.onload = () => {
                s('_'), window.dispatchEvent(new CustomEvent('ebakusLoaded'))
              }),
              (t.src = 'https://testpow.ebakus.com')
            const n = document.createElement('a')
            n.setAttribute('href', 'https://testpow.ebakus.com'), (r = n.origin)
            try {
              document.body.appendChild(t)
            } catch (n) {
              window.addEventListener('DOMContentLoaded', () =>
                (document.body || document.documentElement).appendChild(t)
              )
            }
            return t
          })()),
          (i = o.contentWindow),
          window.addEventListener('message', l, !1)
      })()
    const f = t => s('init', t),
      p = () => a('defaultAddress'),
      d = () => a('getBalance'),
      v = t => a('sendTransaction', t)
  },
])
